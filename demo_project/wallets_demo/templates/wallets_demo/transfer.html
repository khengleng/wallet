{% extends 'wallets_demo/base.html' %}

{% block title %}Transfer - DJ Wallet{% endblock %}

{% block content %}
<div style="max-width: 500px; margin: 0 auto;">
    <div class="card">
        <h1>Send Money</h1>
        <p class="text-muted mb-4">Transfer funds instantly to another user.</p>

        <div class="alert alert-info"
            style="font-size: 0.875rem; background: #eff6ff; color: #1e40af; border-color: #bfdbfe;">
            Current Balance: <strong>{{ selected_balance|floatformat:2 }} {{ selected_currency }}</strong>
        </div>

        <form method="post">
            {% csrf_token %}
            <div class="form-group">
                <label for="currency">Currency</label>
                <select name="currency" id="currency" required>
                    {% for c in supported_currencies %}
                    <option value="{{ c }}" {% if c == selected_currency %}selected{% endif %}>{{ c }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="form-group">
                <label for="recipient">Recipient Username</label>
                <select name="recipient" id="recipient" required>
                    <option value="" disabled selected>Select user...</option>
                    {% for other_user in users %}
                    <option value="{{ other_user.id }}">{{ other_user.username }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="form-group">
                <label for="amount">Amount</label>
                <input type="number" step="0.01" name="amount" id="amount" placeholder="0.00" required>
            </div>
            <div class="form-group">
                <label for="description">Message (Optional)</label>
                <input type="text" name="description" id="description" placeholder="e.g. Lunch money">
            </div>
            <div class="form-group">
                <label for="maker_note">Maker Note (Optional)</label>
                <textarea name="maker_note" id="maker_note" rows="3"
                    placeholder="Required context for checker approval if maker-checker applies"></textarea>
            </div>
            <button type="submit" class="btn btn-primary" style="width: 100%;">Send Funds</button>
        </form>
    </div>
    <a href="{% url 'dashboard' %}" class="btn btn-outline" style="width: 100%;">Back to Dashboard</a>
</div>
{% endblock %}
